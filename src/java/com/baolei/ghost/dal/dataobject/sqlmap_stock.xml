<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="stock" >
  <resultMap id="RM-STOCK" class="com.baolei.ghost.dal.dataobject.StockDO" >
    <result column="id" property="id" jdbcType="INTEGER" />
    <result column="code" property="code" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="industry" property="industry" jdbcType="VARCHAR" />
    <result column="gmt_create" property="gmtCreate" jdbcType="TIMESTAMP" />
    <result column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
  </resultMap>
  <select id="SQL_SELECT_STOCK_BY_ID" resultMap="RM-STOCK" parameterClass="com.baolei.ghost.dal.dataobject.StockDO" >
    select *
    from stock
    where id = #id#
  </select>
  <select id="SQL_SELECT_STOCK_BY_CODE" resultMap="RM-STOCK" parameterClass="com.baolei.ghost.dal.dataobject.StockDO" >
    select *
    from stock
    where code = #code# 
  </select>
  <select id="SQL_SELECT_ALL_STOCK" resultMap="RM-STOCK"  >
    select *
    from stock
  </select>
  <delete id="SQL_DELETE_STOCK_BY_ID" parameterClass="com.baolei.ghost.dal.dataobject.StockDO" >
    delete from stock
    where id = #id#
  </delete>
  <delete id="SQL_DELETE_STOCK_BY_CODE" parameterClass="com.baolei.ghost.dal.dataobject.StockDO" >
    delete from stock
    where code = #code#
  </delete>
  <insert id="SQL_INSERT_STOCK" parameterClass="com.baolei.ghost.dal.dataobject.StockDO" >
    insert into stock (code,name,industry, gmt_create, gmt_modified)
    values (#code#, #name#, #industry#, #gmtCreate#,#gmtModified#)
    <selectKey resultClass="java.lang.Integer" keyProperty="id" >
      SELECT LAST_INSERT_ID()
    </selectKey>
  </insert>
  <update id="SQL_UPDATE_STOCK_BY_ID" parameterClass="com.baolei.ghost.dal.dataobject.StockDO" >
    update stock
    set 
      code = #code#,
      name = #name#,
      industry = #industry#,
      gmt_create = #gmtCreate#,
      gmt_modified = #gmtModified#
    where id = #id#
  </update>
  <update id="SQL_UPDATE_STOCK_BY_ID_SELECTIVE" parameterClass="com.baolei.ghost.dal.dataobject.StockDO" >
    update stock
    <dynamic prepend="set" >
      <isNotNull prepend="," property="code" >
        code = #code#
      </isNotNull>
      <isNotNull prepend="," property="name" >
        name = #name#
      </isNotNull>
      <isNotNull prepend="," property="industry" >
        industry = #industry#
      </isNotNull>
      <isNotNull prepend="," property="gmtCreate" >
        gmt_create = #gmtCreate#
      </isNotNull>
      <isNotNull prepend="," property="gmtModified" >
        gmt_modified = #gmtModified#
      </isNotNull>
    </dynamic>
    where id = #id#
  </update>
</sqlMap>